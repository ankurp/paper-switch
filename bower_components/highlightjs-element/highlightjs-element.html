<link rel="import" href="highlightjs-import.html">
<link rel="import" href="../polymer/polymer.html">

<!--
Element wrapper for the `highlightjs` (http://highlightjs.org/) library.

##### Example

    <highlightjs-element text="def somefunc(param1='', param2=0):"></highlightjs-element>

##### Example

    <highlightjs-element>
      <template>
    
        <link rel="import" href="/components/polymer/polymer.html">
        <polymer-element name="proto-element">
        <template>
          <span>I'm <b>proto-element</b>. Check out my prototype.</span>
        </template>
        <script>
          Polymer({
          });
        </script>
        </polymer-element>
    
      </template>
    </highlightjs-element>

@class highlightjs-element
@blurb Element wrapper for the highlightjs library.
@status alpha
@snap snap.png
-->
<polymer-element name="highlightjs-element" attributes="text">

  <template>

    <style>
      :host {
        display: block;
      }
    </style>

    <link href="../highlightjs/styles/default.css" rel="stylesheet" />
    <link href="../highlightjs/styles/atelier-forest.light.css" rel="stylesheet" />

    <pre id="content"></pre>

  </template>

  <script>

    Polymer('highlightjs-element', {

      domReady: function() {
        if (!this.text) {
          if (this.firstElementChild && this.firstElementChild.localName === 'template') {
            this.text = this.firstElementChild.innerHTML;
          } else {
            this.text = this.innerHTML;
          }
        }
      },

      textChanged: function() {
        this.$.content.innerHTML = hljs.highlightAuto(this.text || '').value;
      }

    });

  </script>

</polymer-element>
